<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <template id="lbs_report_invoice_custom_document">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="o">
                    <t t-set="company" t-value="o.company_id.sudo()"/>
                    <t t-call="mo_kaneen.external_layout_custom">
                        <style type="text/css">
                            .ritz .waffle a {
                            color: inherit;
                            }
                            .ritz .waffle .s0 {
                            background-color: #efefef;
                            text-align: left;
                            color: #000000;
                            font-family: 'Amiri Regular', 'Lato' !important;;
                            font-size: 12pt;
                            vertical-align: bottom;
                            white-space: nowrap;
                            direction: ltr;
                            padding: 2px 3px 2px 3px;
                            }
                            .ritz .waffle .s02 {
                            background-color: #efefef;
                            text-align: left;
                            color: #000000;
                            font-family: 'Amiri Regular', 'Lato' !important;;
                            font-size: 12pt;
                            vertical-align: bottom;
                            direction: ltr;
                            padding: 2px 3px 2px 3px;
                            }
                            .ritz .waffle .s01 {
                            background-color: #efefef;
                            text-align: right;
                            color: #000000;
                            font-family: 'Amiri Regular', 'Lato' !important;;
                            font-size: 12pt;
                            vertical-align: bottom;
                            white-space: nowrap;
                            direction: ltr;
                            padding: 2px 3px 2px 3px;
                            }
                            .ritz .waffle .s99 {
                            text-align: left;
                            font-family: 'Amiri Regular', 'Lato' !important;;
                            font-size: 12pt;
                            vertical-align: bottom;
                            white-space: nowrap;
                            direction: ltr;
                            padding: 2px 3px 2px 3px;
                            }
                            .ritz .waffle .s1 {
                            background-color: #efefef;
                            text-align: right;
                            color: #000000;
                            font-family: 'Amiri Regular', 'Lato' !important;;
                            font-size: 12pt;
                            vertical-align: bottom;
                            white-space: nowrap;
                            direction: ltr;
                            padding: 2px 3px 2px 3px;
                            }
                            .ritz .waffle .s111 {
                            background-color: #efefef;
                            text-align: left;
                            color: #000000;
                            font-family: 'Amiri Regular', 'Lato' !important;;
                            font-size: 12pt;
                            vertical-align: bottom;
                            white-space: nowrap;
                            direction: ltr;
                            padding: 2px 3px 2px 3px;
                            }
                            .ritz .waffle .s4 {
                            text-align: center;
                            background-color: #efefef;
                            color: #cc4125;
                            font-family: 'Amiri Regular', 'Lato' !important;;
                            font-size: 12pt;
                            vertical-align: bottom;
                            white-space: nowrap;
                            direction: ltr;
                            padding: 2px 3px 2px 3px;
                            }

                            .ritz .waffle .s5 {
                            background-color: #efefef;
                            text-align: right;
                            color: #cc4125;
                            font-family: 'Amiri Regular', 'Lato' !important;;
                            font-size: 12pt;
                            vertical-align: bottom;
                            white-space: nowrap;
                            direction: ltr;
                            padding: 2px 3px 2px 3px;
                            }
                            .ritz .waffle .s55 {
                            background-color: #ffffff;
                            color: #000000;
                            text-align: left;
                            font-family: 'Amiri Regular', 'Lato' !important;;
                            font-size: 12pt;
                            vertical-align: bottom;
                            white-space: nowrap;
                            direction: ltr;
                            padding: 2px 3px 2px 3px;
                            }
                            .ritz .waffle .s6 {
                            background-color: #ffffff;
                            text-align: left;
                            color: #000000;
                            font-family: 'Amiri Regular', 'Lato' !important;;
                            font-size: 12pt;
                            vertical-align: bottom;
                            white-space: nowrap;
                            direction: ltr;
                            padding: 2px 3px 2px 3px;
                            }
                            .ritz .waffle .s7 {
                            background-color: #ffffff;
                            text-align: left;
                            color: #000000;
                            font-family: 'Amiri Regular', 'Lato' !important;;
                            font-size: 12pt;
                            vertical-align: bottom;
                            direction: ltr;
                            padding: 2px 3px 2px 3px;
                            }
                            .ritz .waffle .s77 {
                            text-align: center;
                            background-color: #efefef;
                            color: #cc4125;
                            font-family: 'Amiri Regular', 'Lato' !important;;
                            font-size: 12pt;
                            vertical-align: bottom;
                            white-space: nowrap;
                            direction: ltr;
                            padding: 2px 3px 2px 3px;
                            }
                            .ritz .waffle .s10 {
                            background-color: #ffffff;
                            text-align: left;
                            color: #cc4125;
                            font-family: 'Amiri Regular', 'Lato' !important;;
                            font-size: 12pt;
                            vertical-align: bottom;
                            white-space: nowrap;
                            direction: ltr;
                            padding: 2px 3px 2px 3px;
                            }

                            .ritz .waffle .s11 {
                            border-left: none;
                            background-color: #ffffff;
                            text-align: right;
                            color: #000000;
                            font-family: 'Amiri Regular', 'Lato' !important;;
                            font-size: 12pt;
                            vertical-align: bottom;
                            white-space: nowrap;
                            direction: rtl;
                            padding: 2px 3px 2px 3px;
                            }

                            .ritz .waffle .s12 {
                            border-bottom: 1px SOLID #000000;
                            background-color: #ffffff;
                            text-align: right;
                            color: #000000;
                            font-family: 'Amiri Regular', 'Lato' !important;;
                            font-size: 12pt;
                            vertical-align: bottom;
                            white-space: nowrap;
                            direction: rtl;
                            padding: 2px 3px 2px 3px;
                            }

                            .ritz .waffle .s13 {
                            background-color: #ffffff;
                            text-align: left;
                            color: #000000;
                            font-family: 'Amiri Regular', 'Lato' !important;;
                            font-size: 12pt;
                            vertical-align: bottom;
                            white-space: nowrap;
                            direction: ltr;
                            padding: 2px 3px 2px 3px;
                            }

                            .ritz .waffle .s14 {
                            background-color: #ffffff;
                            text-align: right;
                            color: #000000;
                            font-family: 'Amiri Regular', 'Lato' !important;;
                            font-size: 12pt;
                            vertical-align: bottom;
                            white-space: nowrap;
                            direction: rtl;
                            padding: 2px 3px 2px 3px;
                            }

                            .ritz .waffle .s15 {
                            border-right: none;
                            background-color: #ffffff;
                            text-align: left;
                            color: #000000;
                            font-family: 'Amiri Regular', 'Lato' !important;;
                            font-size: 12pt;
                            vertical-align: bottom;
                            white-space: nowrap;
                            direction: ltr;
                            padding: 2px 3px 2px 3px;
                            }

                            .ritz .waffle .s17 {
                            border-bottom: 1px SOLID #000000;
                            background-color: #ffffff;
                            text-align: left;
                            color: #000000;
                            font-family: 'Amiri Regular', 'Lato' !important;;
                            font-size: 12pt;
                            vertical-align: bottom;
                            white-space: nowrap;
                            direction: ltr;
                            padding: 2px 3px 2px 3px;
                            }

                            .ritz .waffle .s16 {
                            background-color: #ffffff;
                            text-align: right;
                            color: #cc4125;
                            font-family: 'Amiri Regular', 'Lato' !important;;
                            font-size: 12pt;
                            vertical-align: bottom;
                            white-space: nowrap;
                            direction: rtl;
                            padding: 2px 3px 2px 3px;
                            }
                        </style>
                        <t t-set="lang" t-value="o.sudo().create_uid.lang"/>
                        <t t-set="o" t-value="o.sudo().with_context(lang=lang)"/>
                        <t t-lang="ar"/>
                        <div class="page">
                            <div>
                                <div style="float:left;">
                                    <img t-if="company.logo" t-att-src="image_data_uri(company.logo)"
                                         style="width: 200px; height:85px"/>
                                </div>
                                <div style="float:right;">
                                    <img t-att-src="'/report/barcode/?type=%s&amp;value=%s&amp;width=%s&amp;height=%s'%('QR', o.einv_sa_qr_code_str, 90, 90)"
                                         class="float-right my-1"/>
                                </div>
                            </div>
                            <br/>
                            <div style="font-size:1.2rem;position: absolute ;left: 43%;margin-top:35px">
                                <Strong>فاتورة ضريبية</Strong>
                                <br/>
                                <Strong>Tax Invoice</Strong>
                            </div>
                            <div class="ritz grid-container" dir="ltr" style="margin-top:100px;">
                                <table class="waffle" cellspacing="0" cellpadding="0" width="100%">
                                    <thead>
                                    </thead>
                                    <tbody>
                                        <tr style="height: 20px">
                                            <td class="s0" dir="ltr">Bill to</td>
                                            <td class="s0" dir="ltr"/>
                                            <td class="s01" dir="ltr">فاتورة الى</td>
                                            <td class="s99"/>
                                            <td class="s0" dir="ltr">Bill From</td>
                                            <td class="s0"/>
                                            <td class="s01">فاتورة من</td>
                                        </tr>
                                        <tr style="height: 20px">
                                            <td class="s0" dir="ltr">Name</td>
                                            <td class="s0" dir="ltr" style="text-align: center">
                                                <span t-field="o.partner_id.name"/>
                                            </td>
                                            <td class="s01" dir="ltr">الاسم</td>
                                            <td class="s99"/>
                                            <td class="s0">Name</td>
                                            <td class="s0" dir="ltr" style="text-align: center">
                                                <t t-esc="company.name"/>
                                            </td>
                                            <td class="s01" dir="ltr">الاسم</td>
                                        </tr>
                                        <tr style="height: 20px">
                                            <td class="s0" dir="ltr" style="vertical-align: top;">Address</td>
                                            <td class="s02" dir="ltr" style="text-align: center">
                                                <address id="slip-by_customer_address" t-field="o.partner_id"
                                                         t-options="{&quot;widget&quot;: &quot;contact&quot;, &quot;fields&quot;: [&quot;address&quot;], &quot;no_marker&quot;: True}"/>
                                            </td>
                                            <td class="s01" dir="ltr" style="vertical-align: top;">العنوان</td>
                                            <td class="s99"/>
                                            <td class="s0" style="vertical-align: top;">Address</td>
                                            <td class="s0" dir="ltr" style="text-align: center">
                                                <address id="slip-by_customer_address" t-field="company.partner_id"
                                                         t-options="{&quot;widget&quot;: &quot;contact&quot;, &quot;fields&quot;: [&quot;address&quot;], &quot;no_marker&quot;: True}"/>
                                            </td>
                                            <td class="s01" dir="ltr" style="vertical-align: top;">العنوان</td>
                                        </tr>
                                        <tr style="height: 20px">
                                            <td class="s0" dir="ltr"></td>
                                            <td class="s0" dir="ltr" style="text-align: center">
                                                <!--                                                <span t-field="o.partner_id.vat"/>-->
                                            </td>
                                            <td class="s01" dir="ltr"></td>
                                            <td class="s99"/>
                                            <td class="s0">VAT No.</td>
                                            <td class="s0" dir="ltr" style="text-align: center">
                                                <t t-esc="company.vat"/>
                                            </td>
                                            <td class="s01" dir="ltr">الرقم الضريبي</td>
                                        </tr>
                                        <tr style="height: 20px">
                                            <td class="s0" dir="ltr"></td>
                                            <td class="s0" dir="ltr" style="text-align: center">
                                                <!--                                                <span t-field="o.partner_id.other_id"/>-->
                                            </td>
                                            <td class="s01" dir="ltr"></td>
                                            <td class="s99"/>
                                            <td class="s0">CR No.</td>
                                            <td class="s0" dir="ltr" style="text-align: center">
                                                <t t-esc="company.company_registry"/>
                                            </td>
                                            <td class="s01" dir="ltr">السجل التجاري</td>
                                        </tr>
                                    </tbody>
                                </table>
                                <br/>
                                <br/>
                                <table class="waffle" cellspacing="0" cellpadding="0" width="100%">
                                    <thead>
                                    </thead>
                                    <tbody>
                                        <tr style="height: 20px">
                                            <td class="s1"/>
                                            <td class="s1"/>
                                            <td class="s1"/>
                                            <td class="s1"/>
                                            <td class="s1" width="440px"/>
                                            <td class="s111" dir="ltr">Invoice Number</td>
                                            <td class="s111" dir="ltr">
                                                <span t-field="o.name"/>
                                            </td>
                                            <td class="s1" dir="ltr">رقم الفاتورة</td>
                                        </tr>
                                        <tr style="height: 20px">
                                            <td class="s1"/>
                                            <td class="s1"/>
                                            <td class="s1"/>
                                            <td class="s1"/>
                                            <td class="s1"/>
                                            <td class="s111" dir="ltr">Invoice Date</td>
                                            <td class="s111" dir="ltr">
                                                <span t-field="o.invoice_date"/>
                                            </td>
                                            <td class="s1" dir="ltr">تاريخ الفاتورة</td>
                                        </tr>
                                        <tr style="height: 20px">
                                            <td class="s1"/>
                                            <td class="s1"/>
                                            <td class="s1"/>
                                            <td class="s1"/>
                                            <td class="s1"/>
                                            <td class="s111" dir="ltr">Created by</td>
                                            <td class="s111" dir="ltr"/>
                                            <td class="s1" dir="ltr">تم الإنشاء بواسطة</td>
                                        </tr>
                                    </tbody>
                                </table>
                                <br/>
                                <br/>
                                <table class="waffle" cellspacing="0" cellpadding="0" width="100%">
                                    <thead>
                                    </thead>
                                    <tbody>
                                        <tr style="height: 20px">
                                            <td class="s5" dir="ltr">#</td>
                                            <td class="s77" dir="ltr">طبيعة السلع أو الخدمات</td>
                                            <td class="s4" dir="ltr">سعر الوحدة</td>
                                            <td class="s4" dir="ltr">الكمية</td>
                                            <td class="s4" dir="ltr">المبلغ الخاضع للضريبة</td>
                                            <td class="s4" dir="ltr">تخفيض</td>
                                            <td class="s4" dir="ltr">معدل الضريبة</td>
                                            <td class="s4" dir="ltr">قيمة الضريبة</td>
                                            <td class="s4" dir="ltr">(المجموع الفرعي للبند (متضمنًا ضريبة القيمة المضافة
                                            </td>
                                        </tr>
                                        <tr style="height: 20px">
                                            <td class="s5" dir="ltr"/>
                                            <td class="s77">Nature of Goods or Services</td>
                                            <td class="s4">Unit Price</td>
                                            <td class="s4">Quantity</td>
                                            <td class="s4">Taxable Amount</td>
                                            <td class="s4">Discount</td>
                                            <td class="s4">Tax Rate</td>
                                            <td class="s4">Tax Amount</td>
                                            <td class="s4">Item Subtotal (Including VAT)</td>
                                        </tr>
                                        <t t-set="count" t-value="1"/>
                                        <t t-foreach="o.invoice_line_ids" t-as="line">
                                            <tr style="height: 20px">
                                                <td class="s55" dir="ltr" style="vertical-align: baseline;">
                                                    <t t-esc="count"/>
                                                </td>
                                                <t t-set="count" t-value="count + 1"/>
                                                <td class="s7" dir="ltr" style="vertical-align: baseline;">
                                                    <t t-if="line.product_id.detailed_type == 'service'">
                                                        <t t-esc="line.product_id.name"/>
                                                    </t>
                                                    <t t-else="">
                                                        <t t-esc="line.name"/>
                                                    </t>
                                                </td>
                                                <td class="s6" dir="ltr" style="text-align: right;vertical-align: baseline;">
                                                    <span t-field="line.price_unit"/><span t-esc="o.currency_id.symbol" style="margin-left: 5px;"/>
                                                </td>
                                                <td class="s6" dir="ltr" style="text-align: right;vertical-align: baseline;">
                                                    <t t-esc="line.quantity"/>
                                                </td>
                                                <td class="s6" dir="ltr" style="text-align: right;vertical-align: baseline;">
                                                    <span t-field="line.price_subtotal"/>
                                                </td>
                                                <td class="s6" dir="ltr" style="text-align: right;vertical-align: baseline;">
                                                    <span t-field="line.einv_amount_discount"/>
                                                </td>
                                                <td class="s6" dir="ltr" style="text-align: right;vertical-align: baseline;">
                                                    <span t-esc="', '.join(map(lambda x: (x.description or x.name), line.tax_ids))"
                                                          id="line_tax_ids"/>
                                                </td>
                                                <td class="s6" dir="ltr" style="text-align: right;vertical-align: baseline;">
                                                    <span t-field="line.einv_amount_tax"/>
                                                </td>
                                                <td class="s6" dir="ltr" style="text-align: right;vertical-align: baseline;">
                                                    <span t-field="line.price_total"/>
                                                </td>
                                            </tr>
                                        </t>
                                    </tbody>
                                </table>
                                <br/>
                                <br/>
                                <table class="waffle" cellspacing="0" cellpadding="0">
                                    <thead>
                                    </thead>
                                    <tbody>
                                        <tr style="height: 20px">
                                            <td class="s13" dir="ltr">Total (Excluding VAT)</td>
                                            <td class="s14" dir="rtl" style="padding-left: 40px;">الإجمالي (باستثناء ضريبة القيمة المضافة)</td>
                                            <td class="s13" dir="ltr" style="padding-left: 40px;">
                                                <span t-field="o.amount_untaxed"/>
                                            </td>
                                        </tr>
                                        <tr style="height: 20px">
                                            <td class="s13" dir="ltr">Discount</td>
                                            <td class="s14" dir="rtl" style="padding-left: 40px;">الخصومات</td>
                                            <td class="s13" style="padding-left: 40px;">
                                                <span t-field="o.einv_amount_discount_total"/>
                                            </td>
                                        </tr>
                                        <tr style="height: 20px">
                                            <td class="s13" dir="ltr">Total Taxable Amount (Excluding VAT)</td>
                                            <td class="s11 softmerge" dir="rtl" style="padding-left: 40px;">
                                                <div class="softmerge-inner" style="width:301px;left:-36px">إجمالي
                                                    المبلغ الخاضع للضريبة (باستثناء ضريبة القيمة المضافة)
                                                </div>
                                            </td>
                                            <td class="s15" dir="ltr" style="padding-left: 40px;">
                                                <span t-field="o.amount_untaxed"/>
                                            </td>
                                        </tr>
                                        <tr style="height: 20px">
                                            <td class="s17" dir="ltr">Total VAT</td>
                                            <td class="s12" dir="rtl" style="padding-left: 40px;">إجمالي الضريبة</td>
                                            <td class="s17" dir="ltr" style="padding-left: 40px;">
                                                <span t-field="o.amount_tax_signed"/>
                                            </td>
                                        </tr>
                                        <tr style="height: 20px">
                                            <td class="s10" dir="ltr">Total Amount Due</td>
                                            <td class="s16" dir="rtl" style="padding-left: 40px;">إجمالي المبلغ المستحق</td>
                                            <td class="s10" dir="ltr" style="padding-left: 40px;">
                                                <span t-field="o.amount_total"/>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </t>
                </t>
            </t>
        </template>

        <template id="mo_kaneen.external_layout_custom">
            <div t-attf-class="article o_report_layout_standard o_company_#{company.id}_layout {{  'o_layout_background' if company.layout_background in ['Geometric', 'Custom']  else  '' }}"
                 t-attf-style="background-image: url({{ 'data:image/png;base64,%s' % company.layout_background_image.decode('utf-8') if company.layout_background_image and company.layout_background == 'Custom' else '/base/static/img/bg_background_template.jpg' if company.layout_background == 'Geometric' else ''}});"
                 t-att-data-oe-model="o and o._name" t-att-data-oe-id="o and o.id"
                 t-att-data-oe-lang="o and o.env.context.get('lang')">
                <t t-out="0"/>
            </div>

            <div t-attf-class="footer o_standard_footer o_company_#{company.id}_layout">
                <div class="text-center" style="border-top: 1px solid black;">
                    <ul class="list-inline mb4">
                        <div style="position: relative;">
                            <div t-field="company.customer_service_email" style="float: left;"/>
                            <div t-field="company.website"
                                 style="position: absolute;left: 45%;transform: translate(-45%);"/>
                            <div t-field="company.email" style="float: right;"/>
                        </div>
                    </ul>
                    <div t-if="report_type == 'pdf'" class="text-muted">
                        Page:<span class="page"/>/
                        <span class="topage"/>
                    </div>
                </div>
            </div>
        </template>

        <record id="lbs_report_invoice_custom_document_action" model="ir.actions.report">
            <field name="name">Invoice custom</field>
            <field name="model">account.move</field>
            <field name="report_type">qweb-pdf</field>
            <field name="report_name">mo_kaneen.lbs_report_invoice_custom_document</field>
            <field name="report_file">mo_kaneen.lbs_report_invoice_custom_document</field>
            <field name="print_report_name">'Invoice-%s' % object.name</field>
            <field name="binding_type">report</field>
            <field name="paperformat_id" ref="mo_kaneen.paperformat_hrsummary"/>
        </record>
    </data>
</odoo>
