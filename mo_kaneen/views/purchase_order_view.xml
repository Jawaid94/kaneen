<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="mo_inherit_purchase_order_form" model="ir.ui.view">
        <field name="name">mo.purchase.ordere.form</field>
        <field name="model">purchase.order</field>
        <field name="inherit_id" ref="purchase.purchase_order_form"/>
        <field name="arch" type="xml">
            <xpath expr="//header" position="inside">
                <button type="object" name="send_order_to_shatha" string="Export to Shatha"
                        attrs="{'invisible': ['|', ('send_status', '=', 'sent'), '|', ('state', '!=', 'purchase'), ('visible_order_send_to_shatha', '=', False)]}"/>
                <button type="object" name="resend_order_to_shatha" string="Reexport to Shatha"
                        attrs="{'invisible': ['|', ('send_status', '!=', 'sent'), '|', ('state', '!=', 'purchase'), ('visible_order_send_to_shatha', '=', False)]}"/>
                <button type="object" name="recount_price" string="Recount Price"/>
                <field name="send_status" readonly="1" widget="statusbar"/>
            </xpath>
            <xpath expr="//div[@name='reminder']" position="after">
                <field name="visible_order_send_to_shatha" invisible="1"/>
            </xpath>
        </field>
    </record>

    <record id="purchase_order_quotation_inherit" model="ir.ui.view">
        <field name="name">purchase.order.quotation.inherit</field>
        <field name="model">purchase.order</field>
        <field name="inherit_id" ref="purchase.purchase_order_kpis_tree"/>
        <field name="groups_id" eval="[(4, ref('base.group_user'))]"/>
        <field name="arch" type="xml">
            <xpath expr="//tree" position="attributes">
                <attribute name="decoration-danger">send_status == 'error'</attribute>
                <attribute name="decoration-success">send_status == 'sent'</attribute>
            </xpath>
            <xpath expr="//header" position="inside">
                <button class="btn-primary" name="action_multi_confirm" type="object" string="Confirm Orders"/>
            </xpath>
            <xpath expr="//field[@name='state']" position="after">
                <field name="send_status" widget="badge"/>
            </xpath>
        </field>
    </record>

    <record id="bulk_purchase_export_view_form" model="ir.ui.view">
        <field name="name">bulk.purchase.export.view.form</field>
        <field name="model">bulk.purchase.export</field>
        <field name="arch" type="xml">
            <form>
                Are you sure want export purchase Orders
                <footer>
                    <button name="purchase_button_export" string="Export To Shatha" type="object" class="oe_highlight"/>
                    or
                    <button string="Cancel" special="cancel" class="oe_link"/>
                </footer>
            </form>
        </field>
    </record>

    <act_window id="action_export_purchase_order"
                name="Export To Shatha"
                binding_model="purchase.order"
                res_model="bulk.purchase.export"
                view_id="bulk_purchase_export_view_form"
                target="new"
    />

</odoo>